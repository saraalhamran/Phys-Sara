<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PS70: Intro to Digital Fabrication — Week 6 (Electronic Inputs)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="../style.css" rel="stylesheet">
  <style>
    /* Page-specific tweaks to match your Final Project look */
    .rich p, .rich .h6, .rich li { font-size: 1.05rem; line-height: 1.9; }
    figure { margin: 0 0 1rem 0; }
    .hero-figure { max-width: 720px; margin: 0 auto 1rem; }
    .hero-figure img { width: 100%; height: auto; display: block; }
  </style>
</head>

<body>
  <!-- Top Header (colors unchanged) -->
  <nav class="navbar navbar-expand-sm navbar-dark" style=" color: #EEE7E8;">
    <div class="container-fluid" style="align-items: center; justify-content: center;">
      <div class="flexrow">
        <h2 class="nav-title">Digital Fabrication - Summer 2025</h2>
      </div>
      <div class="navbar-nav">
        <h4><a class="nav-link" href="../index.html">Home</a></h4>
        <h4><a class="nav-link" href="../about.html">About</a></h4>
      </div>
    </div>
  </nav>

  <main class="container py-4 page rich">
    <header class="mb-3">
      <h3>Week 6: Electronic Inputs</h3>
      <p class="h6 lh-base mb-0">
        This week I focused on turning a **wireless charger** into a reliable **input** for my final project.
        The goal: when a phone is truly charging (not just hovering), the system should know and kick off a study timer.
        I treated it like a mini pipeline—measure → verify → protect—so the signal that reaches the ESP32 is clean,
        safe, and trustworthy.
      </p>
    </header>

    <!-- Wireless Charger Sensor -->
    <section class="mb-4" aria-label="Wireless Charger Sensor">
      <h4 class="mb-2">Wireless Charger Sensor</h4>
      <p class="h6 lh-base">
        Bobby pitched a great idea for my final: let the **charger** do double-duty as the **sensor**. If the phone is on
        the pad and drawing current, Teddy (my study buddy) starts the Pomodoro timer. If the phone’s off the pad, no timer.
        That turns a simple habit—put the phone down—into the start signal for focus.
      </p>
      <figure class="mb-3 hero-figure">
        <img src="./wi.png" alt="Qi wireless charger module on the bench" class="img-card" loading="lazy">
        <figcaption class="caption">The tiny workhorse: a Qi charger module that also tells me when a phone is present.</figcaption>
      </figure>
    </section>

    <!-- Module & First Measurements -->
    <section class="mb-4" aria-label="Module & First Measurements">
      <h4 class="mb-2">Mapping Pins & Initial Measurements</h4>
      <div class="row align-items-start gallery-gap">
        <div class="col-12 col-md-6">
          <figure><img src="./lo.png" alt="Qi charger board top view" class="img-card img-fluid" loading="lazy"></figure>
        </div>
        <div class="col-12 col-md-6">
          <figure><img src="./la.png" alt="Qi charger board pin labels" class="img-card img-fluid" loading="lazy"></figure>
        </div>
      </div>
      <p class="h6 lh-base">
        First step was **pin discovery**. The board exposes multiple pads; I used a multimeter to log voltages
        **before/after** placing a phone on the charger. I was looking for a pad that consistently changes during
        real charging, not just proximity.
      </p>
    </section>

    <!-- Multimeter -->
    <section class="mb-4" aria-label="Multimeter Readings">
      <h4 class="mb-2">Multimeter Pass</h4>
      <div class="row gallery-gap">
        <div class="col-12 col-md-6 col-lg-4">
          <figure><img src="./ta.png" alt="Probing charger pins with a multimeter" class="img-card img-fluid" loading="lazy"></figure>
        </div>
      </div>
      <p class="h6 lh-base">
        I clipped black to **GND** and probed each candidate with red, logging idle vs. charging values. Two pads looked
        promising. That narrowed the scope for oscilloscope testing.
      </p>
    </section>

    <!-- Soldering -->
    <section class="mb-4" aria-label="Soldering Leads">
      <h4 class="mb-2">Soldering Leads</h4>
      <div class="row align-items-start gallery-gap">
        <div class="col-12 col-md-6">
          <figure><img src="./bo.png" alt="Soldering wires onto the charger pads" class="img-card img-fluid" loading="lazy"></figure>
        </div>
        <div class="col-12 col-md-6">
          <p class="h6 lh-base">
            GND took patience—wetting was tricky on two boards until I bumped the iron temp up (not a universal fix,
            but it worked here). With **GND** and a **candidate pad** wired, I was ready for scope traces.
          </p>
        </div>
      </div>
    </section>

    <!-- Oscilloscope -->
    <section class="mb-4" aria-label="Oscilloscope Results">
      <h4 class="mb-2">Oscilloscope: Picking the Right Pad</h4>
      <div class="row gallery-gap">
        <div class="col-12 col-md-6">
          <figure><img src="./1.png" alt="Testing pin C: oscilloscope setup" class="img-card img-fluid" loading="lazy"></figure>
        </div>
        <div class="col-12 col-md-6">
          <figure><img src="./3.png" alt="Pin C waveform on scope" class="img-card img-fluid" loading="lazy"></figure>
        </div>
        <div class="col-12 col-md-6">
          <figure><img src="./4.png" alt="Pin C: high spikes around 14V" class="img-card img-fluid" loading="lazy"></figure>
        </div>
      </div>
      <p class="h6 lh-base">
        <strong>Pin C:</strong> noisy, with spikes up to ~14&nbsp;V. Interesting, but not friendly for a microcontroller input,
        even with protection. I ruled it out.
      </p>
      <div class="row gallery-gap">
        <div class="col-12 col-md-6">
          <figure><img src="./ei.png" alt="Soldering to pin D" class="img-card img-fluid" loading="lazy"></figure>
        </div>
        <div class="col-12 col-md-6">
          <figure><img src="./no.png" alt="Pin D waveform on scope: stable pattern" class="img-card img-fluid" loading="lazy"></figure>
        </div>
      </div>
      <p class="h6 lh-base">
        <strong>Pin D:</strong> stable and predictable—exactly what I wanted for detection logic. This became the **ADC source**.
      </p>
    </section>

    <!-- Circuit & Divider -->
    <section class="mb-4" aria-label="Circuit & Voltage Divider">
      <h4 class="mb-2">Circuit & Protection</h4>
      <p class="h6 lh-base">
        I fed the chosen pad into an **ESP32 ADC** through a **voltage divider (20&nbsp;kΩ / 10&nbsp;kΩ)**. The divider both
        protects the pin and tames little spikes so readings settle. Everything shares a **common ground** with the charger.
      </p>
      <ul class="h6">
        <li><strong>Signal path:</strong> Charger pad → Divider → ESP32 ADC</li>
        <li><strong>Safety:</strong> Divider keeps the micro safe; no direct high swings to the ADC</li>
        <li><strong>Debug:</strong> Serial printouts during calibration to lock good thresholds</li>
      </ul>
    </section>

    <!-- What the code does (high level) -->
    <section class="mb-4" aria-label="Detection Logic">
      <h4 class="mb-2">Detection Logic (High Level)</h4>
      <ul class="h6">
        <li>Sample the ADC on a fixed interval and keep a **rolling average** to smooth noise.</li>
        <li>Use two thresholds (on/off) for **hysteresis** so the state doesn’t chatter near the boundary.</li>
        <li>Confirm state changes only after **N consistent samples**—a simple debounce for analog signals.</li>
        <li>Only start the **Pomodoro timer** once “charging” is confirmed; pause/stop when it isn’t.</li>
      </ul>
    </section>

    <!-- Lessons / Reflection -->
    <section aria-label="Lessons & Next Steps">
      <h4 class="mb-2">Lessons & Next Steps</h4>
      <ul class="h6">
        <li>**Measure first.** Multimeter narrows suspects; scope decides the winner.</li>
        <li>**Protect the input.** A small divider goes a long way toward stability and safety.</li>
        <li>**Debounce analog, too.** Averages + hysteresis make the behavior feel deliberate instead of twitchy.</li>
      </ul>
      <p class="h6 lh-base mb-0">
        Next I’ll log ADC values over a full day with different phone models to refine thresholds,
        then package this into a tidy library function for the main Teddy firmware.
      </p>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
